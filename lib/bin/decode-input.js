'use strict';

const process = require('process');
const InputDataDecoder = require('ethereum-input-data-decoder');
process.env.BC_LOG = 'error';
process.env.BC_DEBUG = true;

process.on('unhandledRejection', e => {
  console.error(e.stack); // eslint-disable-line no-console
});

const erc20Abi = [{
  'constant': true,
  'inputs': [],
  'name': 'name',
  'outputs': [{
    'name': '',
    'type': 'string'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [],
  'name': 'symbol',
  'outputs': [{
    'name': '',
    'type': 'string'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [],
  'name': 'decimals',
  'outputs': [{
    'name': '',
    'type': 'uint8'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [],
  'name': 'totalSupply',
  'outputs': [{
    'name': '',
    'type': 'uint256'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [{
    'name': '_owner',
    'type': 'address'
  }],
  'name': 'balanceOf',
  'outputs': [{
    'name': 'balance',
    'type': 'uint256'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': false,
  'inputs': [{
    'name': '_to',
    'type': 'address'
  }, {
    'name': '_value',
    'type': 'uint256'
  }],
  'name': 'transfer',
  'outputs': [{
    'name': 'success',
    'type': 'bool'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': false,
  'inputs': [{
    'name': '_from',
    'type': 'address'
  }, {
    'name': '_to',
    'type': 'address'
  }, {
    'name': '_value',
    'type': 'uint256'
  }],
  'name': 'transferFrom',
  'outputs': [{
    'name': 'success',
    'type': 'bool'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': false,
  'inputs': [{
    'name': '_spender',
    'type': 'address'
  }, {
    'name': '_value',
    'type': 'uint256'
  }],
  'name': 'approve',
  'outputs': [{
    'name': 'success',
    'type': 'bool'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [{
    'name': '_owner',
    'type': 'address'
  }, {
    'name': '_spender',
    'type': 'address'
  }],
  'name': 'allowance',
  'outputs': [{
    'name': 'remaining',
    'type': 'uint256'
  }],
  'payable': false,
  'type': 'function'
}, {
  'anonymous': false,
  'inputs': [{
    'indexed': true,
    'name': '_from',
    'type': 'address'
  }, {
    'indexed': true,
    'name': '_to',
    'type': 'address'
  }, {
    'indexed': false,
    'name': '_value',
    'type': 'uint256'
  }],
  'name': 'Transfer',
  'type': 'event'
}, {
  'anonymous': false,
  'inputs': [{
    'indexed': true,
    'name': '_owner',
    'type': 'address'
  }, {
    'indexed': true,
    'name': '_spender',
    'type': 'address'
  }, {
    'indexed': false,
    'name': '_value',
    'type': 'uint256'
  }],
  'name': 'Approval',
  'type': 'event'
}, {
  'inputs': [{
    'name': '_initialAmount',
    'type': 'uint256'
  }, {
    'name': '_tokenName',
    'type': 'string'
  }, {
    'name': '_decimalUnits',
    'type': 'uint8'
  }, {
    'name': '_tokenSymbol',
    'type': 'string'
  }],
  'payable': false,
  'type': 'constructor'
}, {
  'constant': false,
  'inputs': [{
    'name': '_spender',
    'type': 'address'
  }, {
    'name': '_value',
    'type': 'uint256'
  }, {
    'name': '_extraData',
    'type': 'bytes'
  }],
  'name': 'approveAndCall',
  'outputs': [{
    'name': 'success',
    'type': 'bool'
  }],
  'payable': false,
  'type': 'function'
}, {
  'constant': true,
  'inputs': [],
  'name': 'version',
  'outputs': [{
    'name': '',
    'type': 'string'
  }],
  'payable': false,
  'type': 'function'
}];

const decoder = new InputDataDecoder(erc20Abi);

const testData = '0x23b872dd000000000000000000000000982e1fab850a39ac88b439961c07c7f931dbca4b0000000000000000000000006ace7e0abcf0da3097fa7155149dccd51e20ef8200000000000000000000000000000000000000000000000080db878b81a9c400'; // eslint-disable-line no-unused-vars

const testData2 = '0xa9059cbb000000000000000000000000b8c77482e45f1f44de1745f52c74426c631bdd520000000000000000000000000000000000000000000000a2937c529df47c0000';

console.log(decoder.decodeData(testData2)); // eslint-disable-line no-console