	P.all = all;
	function all( input ) {
		var promise = new Promise();
		var len = input.length;

		if ( typeof len !== "number" ) {
			Reject( promise, new TypeError("input not array-like") );
			return promise;
		}

		var output = new Array( len );
		var waiting = len;

		function onSettled( p, i ) {
			if ( p._state === REJECTED ) {
				len = 0;
				Propagate( p, promise );
				return;
			}
			output[ i ] = p._value;
			if ( --waiting === 0 ) {
				Fulfill( promise, output );
			}
		}

		for ( var i = 0; i < len; ++i ) {
			OnSettled( P(input[i]), i, onSettled );
		}

		return promise;
	}
